{"version":3,"sources":["../src/rocketchat.js"],"names":["setRocketChatCourseSync","courseid","pendingsync","Ajax","call","methodname","args","setRocketChatEventBasedSync","eventbasedsync","setRocketChatManuallyTriggerSync","location","reload","setRocketChatRoleSync","roleid","requiresync","init","courses","roles","on","data","is","e","preventDefault","text","prop"],"mappings":"mKAwBA,OACA,O,sDAEMA,CAAAA,CAAuB,CAAG,SAACC,CAAD,CAAWC,CAAX,CAA2B,CACvDC,UAAKC,IAAL,CAAU,CACN,CACIC,UAAU,CAAE,6CADhB,CAEIC,IAAI,CAAE,CACFL,QAAQ,CAAEA,CADR,CAEFC,WAAW,CAAEA,CAFX,CAFV,CADM,CAAV,CASH,C,CAEKK,CAA2B,CAAG,SAACN,CAAD,CAAWO,CAAX,CAA8B,CAC9DL,UAAKC,IAAL,CAAU,CACN,CACIC,UAAU,CAAE,kDADhB,CAEIC,IAAI,CAAE,CACFL,QAAQ,CAAEA,CADR,CAEFO,cAAc,CAAEA,CAFd,CAFV,CADM,CAAV,CASH,C,CAEKC,CAAgC,CAAG,SAACR,CAAD,CAAc,CACnDE,UAAKC,IAAL,CAAU,CACN,CACIC,UAAU,CAAE,wCADhB,CAEIC,IAAI,CAAE,CACFL,QAAQ,CAAEA,CADR,CAFV,CADM,CAAV,EASAS,QAAQ,CAACC,MAAT,EACH,C,CAEKC,CAAqB,CAAG,SAACC,CAAD,CAASC,CAAT,CAAyB,CACnDX,UAAKC,IAAL,CAAU,CACN,CACIC,UAAU,CAAE,2CADhB,CAEIC,IAAI,CAAE,CACFO,MAAM,CAAEA,CADN,CAEFC,WAAW,CAAEA,CAFX,CAFV,CADM,CAAV,CASH,C,CAEYC,CAAI,CAAG,UAAM,IAChBC,CAAAA,CAAO,CAAG,cAAE,qBAAF,CADM,CAEhBC,CAAK,CAAG,cAAE,mBAAF,CAFQ,CAItBD,CAAO,CAACE,EAAR,CAAW,OAAX,CAAoB,6BAApB,CAAiD,UAAW,CACxDlB,CAAuB,CAAC,cAAE,IAAF,EAAQmB,IAAR,CAAa,UAAb,CAAD,CAA2B,cAAE,IAAF,EAAQC,EAAR,CAAW,UAAX,CAA3B,CAC1B,CAFD,EAIAJ,CAAO,CAACE,EAAR,CAAW,OAAX,CAAoB,gCAApB,CAAoD,UAAW,CAC3DX,CAA2B,CAAC,cAAE,IAAF,EAAQY,IAAR,CAAa,UAAb,CAAD,CAA2B,cAAE,IAAF,EAAQC,EAAR,CAAW,UAAX,CAA3B,CAC9B,CAFD,EAIAJ,CAAO,CAACE,EAAR,CAAW,OAAX,CAAoB,QAApB,CAA8B,SAASG,CAAT,CAAY,CACtCA,CAAC,CAACC,cAAF,GAEA,cAAE,IAAF,EAAQC,IAAR,CAAa,aAAb,EACA,cAAE,IAAF,EAAQC,IAAR,CAAa,UAAb,CAAyB,UAAzB,EAEAf,CAAgC,CAAC,cAAE,IAAF,EAAQU,IAAR,CAAa,UAAb,CAAD,CAA2B,IAA3B,CACnC,CAPD,EASAF,CAAK,CAACC,EAAN,CAAS,OAAT,CAAkB,OAAlB,CAA2B,UAAW,CAClCN,CAAqB,CAAC,cAAE,IAAF,EAAQO,IAAR,CAAa,QAAb,CAAD,CAAyB,cAAE,IAAF,EAAQC,EAAR,CAAW,UAAX,CAAzB,CACxB,CAFD,CAGH,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript to initialise the Rocket.Chat courses- and role integration settings.\n *\n * @package     local_rocketchat\n * @copyright   2016 GetSmarter {@link http://www.getsmarter.co.za}\n * @author      2021 Adrian Perez <me@adrianperez.me> {@link https://adrianperez.me}\n * @license     MIT License\n */\n\nimport $ from 'jquery';\nimport Ajax from 'core/ajax';\n\nconst setRocketChatCourseSync = (courseid, pendingsync) => {\n    Ajax.call([\n        {\n            methodname: 'local_rocketchat_set_rocketchat_course_sync',\n            args: {\n                courseid: courseid,\n                pendingsync: pendingsync\n            }\n        }\n    ]);\n};\n\nconst setRocketChatEventBasedSync = (courseid, eventbasedsync) => {\n    Ajax.call([\n        {\n            methodname: 'local_rocketchat_set_rocketchat_event_based_sync',\n            args: {\n                courseid: courseid,\n                eventbasedsync: eventbasedsync\n            }\n        }\n    ]);\n};\n\nconst setRocketChatManuallyTriggerSync = (courseid) => {\n    Ajax.call([\n        {\n            methodname: 'local_rocketchat_manually_trigger_sync',\n            args: {\n                courseid: courseid\n            }\n        }\n    ]);\n\n    location.reload();\n};\n\nconst setRocketChatRoleSync = (roleid, requiresync) => {\n    Ajax.call([\n        {\n            methodname: 'local_rocketchat_set_rocketchat_role_sync',\n            args: {\n                roleid: roleid,\n                requiresync: requiresync\n            }\n        }\n    ]);\n};\n\nexport const init = () => {\n    const courses = $('#integrated-courses');\n    const roles = $('#integrated-roles');\n\n    courses.on('click', 'input[name=\"pendingsync\"]', function() {\n        setRocketChatCourseSync($(this).data('courseid'), $(this).is(\":checked\"));\n    });\n\n    courses.on('click', 'input[name=\"eventbasedsync\"]', function() {\n        setRocketChatEventBasedSync($(this).data('courseid'), $(this).is(\":checked\"));\n    });\n\n    courses.on('click', 'button', function(e) {\n        e.preventDefault();\n\n        $(this).text(\"Syncing ...\");\n        $(this).prop(\"disabled\", \"disabled\");\n\n        setRocketChatManuallyTriggerSync($(this).data('courseid'), this);\n    });\n\n    roles.on('click', 'input', function() {\n        setRocketChatRoleSync($(this).data('roleid'), $(this).is(\":checked\"));\n    });\n};"],"file":"rocketchat.min.js"}