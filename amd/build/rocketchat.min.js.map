{"version":3,"sources":["../src/rocketchat.js"],"names":["define","ajax","module","set_rocketchat_course_sync","course_id","pendingsync","call","methodname","args","courseid","set_rocketchat_role_sync","role_id","requiresync","roleid","set_rocketchat_event_based_sync","eventbasedsync","manually_trigger_sync","location","reload","init","$","on","checkbox","data","is","e","preventDefault","text","prop","window","M","local_rocketchat"],"mappings":"AACAA,OAAM,+BAAC,CAAC,WAAD,CAAc,6BAAd,CAAD,CAA+C,SAASC,CAAT,CAAe,IAC5DC,CAAAA,CAAM,CAAG,EADmD,CAG5DC,CAA0B,CAAG,SAASC,CAAT,CAAoBC,CAApB,CAAiC,CAC9DJ,CAAI,CAACK,IAAL,CAAU,CACV,CACIC,UAAU,CAAE,6CADhB,CAEIC,IAAI,CAAE,CACFC,QAAQ,CAAEL,CADR,CAEFC,WAAW,CAAEA,CAFX,CAFV,CADU,CAAV,CASH,CAb+D,CAe5DK,CAAwB,CAAG,SAASC,CAAT,CAAkBC,CAAlB,CAA+B,CAC1DX,CAAI,CAACK,IAAL,CAAU,CACV,CACIC,UAAU,CAAE,2CADhB,CAEIC,IAAI,CAAE,CACFK,MAAM,CAAEF,CADN,CAEFC,WAAW,CAAEA,CAFX,CAFV,CADU,CAAV,CASH,CAzB+D,CA2B5DE,CAA+B,CAAG,SAASV,CAAT,CAAoBW,CAApB,CAAoC,CACtEd,CAAI,CAACK,IAAL,CAAU,CACV,CACIC,UAAU,CAAE,kDADhB,CAEIC,IAAI,CAAE,CACFC,QAAQ,CAAEL,CADR,CAEFW,cAAc,CAAEA,CAFd,CAFV,CADU,CAAV,CASH,CArC+D,CAuC5DC,CAAqB,CAAG,SAASP,CAAT,CAAmB,CAC3CR,CAAI,CAACK,IAAL,CAAU,CACV,CACIC,UAAU,CAAE,wCADhB,CAEIC,IAAI,CAAE,CACFC,QAAQ,CAAEA,CADR,CAFV,CADU,CAAV,EASAQ,QAAQ,CAACC,MAAT,EACH,CAlD+D,CAoDhEhB,CAAM,CAACiB,IAAP,CAAc,UAAW,CACrBC,CAAC,CAAC,mBAAD,CAAD,CAAuBC,EAAvB,CAA0B,OAA1B,CAAmC,OAAnC,CAA4C,UAAW,CACnD,GAAIC,CAAAA,CAAQ,CAAGF,CAAC,CAAC,IAAD,CAAhB,CACAV,CAAwB,CAACY,CAAQ,CAACC,IAAT,CAAc,QAAd,CAAD,CAA0BD,CAAQ,CAACE,EAAT,CAAY,UAAZ,CAA1B,CAC3B,CAHD,EAKAJ,CAAC,CAAC,qBAAD,CAAD,CAAyBC,EAAzB,CAA4B,OAA5B,CAAqC,QAArC,CAA+C,SAASI,CAAT,CAAY,CACvDA,CAAC,CAACC,cAAF,GACAN,CAAC,CAAC,IAAD,CAAD,CAAQO,IAAR,CAAa,aAAb,EACAP,CAAC,CAAC,IAAD,CAAD,CAAQQ,IAAR,CAAa,UAAb,CAAyB,UAAzB,EACA,GAAInB,CAAAA,CAAQ,CAAGW,CAAC,CAAC,IAAD,CAAD,CAAQG,IAAR,CAAa,UAAb,CAAf,CACAP,CAAqB,CAACP,CAAD,CAAW,IAAX,CACxB,CAND,EAQAW,CAAC,CAAC,qBAAD,CAAD,CAAyBC,EAAzB,CAA4B,OAA5B,CAAqC,6BAArC,CAAkE,UAAW,CACzE,GAAIC,CAAAA,CAAQ,CAAGF,CAAC,CAAC,IAAD,CAAhB,CACAjB,CAA0B,CAACmB,CAAQ,CAACC,IAAT,CAAc,UAAd,CAAD,CAA4BD,CAAQ,CAACE,EAAT,CAAY,UAAZ,CAA5B,CAC7B,CAHD,EAKAJ,CAAC,CAAC,qBAAD,CAAD,CAAyBC,EAAzB,CAA4B,OAA5B,CAAqC,gCAArC,CAAqE,UAAW,CAC5E,GAAIC,CAAAA,CAAQ,CAAGF,CAAC,CAAC,IAAD,CAAhB,CACAN,CAA+B,CAACQ,CAAQ,CAACC,IAAT,CAAc,UAAd,CAAD,CAA4BD,CAAQ,CAACE,EAAT,CAAY,UAAZ,CAA5B,CAClC,CAHD,CAIH,CAvBD,CAyBAK,MAAM,CAACC,CAAP,CAASC,gBAAT,CAA4B7B,CAA5B,CAEA,MAAOA,CAAAA,CACV,CAhFK,CAAN","sourcesContent":["/* eslint-env jquery */\ndefine(['core/ajax', 'local_rocketchat/rocketchat'], function(ajax) {\n    var module = {};\n\n    var set_rocketchat_course_sync = function(course_id, pendingsync) {\n        ajax.call([\n        {\n            methodname: 'local_rocketchat_set_rocketchat_course_sync',\n            args: {\n                courseid: course_id,\n                pendingsync: pendingsync\n            }\n        }\n        ]);\n    };\n\n    var set_rocketchat_role_sync = function(role_id, requiresync) {\n        ajax.call([\n        {\n            methodname: 'local_rocketchat_set_rocketchat_role_sync',\n            args: {\n                roleid: role_id,\n                requiresync: requiresync\n            }\n        }\n        ]);\n    };\n\n    var set_rocketchat_event_based_sync = function(course_id, eventbasedsync) {\n        ajax.call([\n        {\n            methodname: 'local_rocketchat_set_rocketchat_event_based_sync',\n            args: {\n                courseid: course_id,\n                eventbasedsync: eventbasedsync\n            }\n        }\n        ]);\n    };\n\n    var manually_trigger_sync = function(courseid) {\n        ajax.call([\n        {\n            methodname: 'local_rocketchat_manually_trigger_sync',\n            args: {\n                courseid: courseid\n            }\n        }\n        ]);\n\n        location.reload();\n    };\n\n    module.init = function() {\n        $('#integrated-roles').on('click', 'input', function() {\n            var checkbox = $(this);\n            set_rocketchat_role_sync(checkbox.data('roleid'), checkbox.is(\":checked\"));\n        });\n\n        $('#integrated-courses').on('click', 'button', function(e) {\n            e.preventDefault();\n            $(this).text(\"Syncing ...\");\n            $(this).prop(\"disabled\", \"disabled\");\n            var courseid = $(this).data('courseid');\n            manually_trigger_sync(courseid, this);\n        });\n\n        $('#integrated-courses').on('click', 'input[name=\"pendingsync\"]', function() {\n            var checkbox = $(this);\n            set_rocketchat_course_sync(checkbox.data('courseid'), checkbox.is(\":checked\"));\n        });\n\n        $('#integrated-courses').on('click', 'input[name=\"eventbasedsync\"]', function() {\n            var checkbox = $(this);\n            set_rocketchat_event_based_sync(checkbox.data('courseid'), checkbox.is(\":checked\"));\n        });\n    };\n\n    window.M.local_rocketchat = module;\n\n    return module;\n});"],"file":"rocketchat.min.js"}