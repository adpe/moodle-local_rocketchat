define(["core/ajax","local_rocketchat/rocketchat"],function(a){var b={},c=function(b,c){var d=a.call([{methodname:"local_rocketchat_set_rocketchat_course_sync",args:{courseid:b,pendingsync:c}}]);d[0].done(function(a){console.log("Save successful")}).fail(function(a){console.log(a)})},d=function(b,c){var d=a.call([{methodname:"local_rocketchat_set_rocketchat_role_sync",args:{roleid:b,requiresync:c}}]);d[0].done(function(a){console.log("Save successful")}).fail(function(a){console.log(a)})},e=function(b,c){var d=a.call([{methodname:"local_rocketchat_manually_trigger_sync",args:{courseid:b}}]);d[0].done(function(a){console.log("Save successful"),location.reload()}).fail(function(a){location.reload(),console.log("There was an error"),console.log(a)})};return b.init=function(){$("#integrated-roles").on("click","input",function(){var a=$(this);d(a.data("roleid"),a.is(":checked"))}),$("#integrated-courses").on("click","button",function(a){a.preventDefault(),$(this).text("Syncing ..."),$(this).prop("disabled","disabled");var b=$(this).data("courseid");console.log("The courseid is ",b),e(b,this)})},$("#integrated-courses").on("click","input",function(){var a=$(this);console.log(a.data("courseid")),c(a.data("courseid"),a.is(":checked"))}),window.M.local_rocketchat=b,b});